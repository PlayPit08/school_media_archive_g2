{% extends 'base.html' %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - –§–æ—Ç–æ–∞—Ä—Ö–∏–≤ —à–∫–æ–ª—ã ‚Ññ2086{% endblock %}

{% block content %}
<h1 class="page-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>

<!-- –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
{% if user.is_staff or user.is_superuser %}
<div style="display: flex; gap: 15px; justify-content: center; margin-bottom: 30px;">
    {% if user.is_staff or user.is_superuser %}
        <a href="{% url 'moderation_dashboard' %}" class="btn" style="background: #ffc107; color: #000; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 500;">
            üìã –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        </a>
    {% endif %}
    {% if user.is_superuser %}
        <a href="/admin/" class="btn" style="background: transparent; color: #cb5603; border: 2px solid #cb5603; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 500;" target="_blank">
            ‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞
        </a>
    {% endif %}
</div>
{% endif %}

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 20px;">
    
    <!-- –ú–æ–∏ —É—á–µ–±–Ω—ã–µ –≥–æ–¥—ã -->
    <div class="card" style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
        <h3 style="color: #cb5603; margin-bottom: 20px;">–ú–æ–∏ —É—á–µ–±–Ω—ã–µ –≥–æ–¥—ã ({{ user_years.count }})</h3>
        {% if user_years %}
            <ul style="list-style: none; padding: 0;">
            {% for year in user_years %}
                <li style="padding: 10px; border-bottom: 1px solid #eee;">
                    <strong>{{ year.year }}</strong> 
                    <span style="float: right; 
                                color: {% if year.status == 'approved' %}#28a745{% elif year.status == 'pending' %}#856404{% else %}#721c24{% endif %};
                                background: {% if year.status == 'approved' %}#d4edda{% elif year.status == 'pending' %}#fff3cd{% else %}#f8d7da{% endif %};
                                padding: 2px 8px; border-radius: 12px; font-size: 12px;">
                        {% if year.status == 'approved' %}‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ
                        {% elif year.status == 'pending' %}‚è≥ –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
                        {% else %}‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ{% endif %}
                    </span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p style="color: #666;">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ —É—á–µ–±–Ω—ã–µ –≥–æ–¥—ã</p>
        {% endif %}
        <!-- –£–í–ï–õ–ò–ß–ï–ù–ù–´–ô –û–¢–°–¢–£–ü -->
        <div style="margin-top: 25px;">
            <a href="{% url 'create_year' %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-block; width: 100%; text-align: center;">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–±–Ω—ã–π –≥–æ–¥
            </a>
        </div>
    </div>
    
    <!-- –ú–æ–∏ —Å–æ–±—ã—Ç–∏—è -->
    <div class="card" style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
        <h3 style="color: #cb5603; margin-bottom: 20px;">–ú–æ–∏ —Å–æ–±—ã—Ç–∏—è ({{ user_events.count }})</h3>
        {% if user_events %}
            <ul style="list-style: none; padding: 0;">
            {% for event in user_events %}
                <li style="padding: 10px; border-bottom: 1px solid #eee;">
                    <strong>{{ event.title }}</strong>
                    <br>
                    <small>–ì–æ–¥: {{ event.year_album.year }}</small>
                    <span style="float: right; 
                                color: {% if event.status == 'approved' %}#28a745{% elif event.status == 'pending' %}#856404{% else %}#721c24{% endif %};
                                background: {% if event.status == 'approved' %}#d4edda{% elif event.status == 'pending' %}#fff3cd{% else %}#f8d7da{% endif %};
                                padding: 2px 8px; border-radius: 12px; font-size: 12px;">
                        {% if event.status == 'approved' %}‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ
                        {% elif event.status == 'pending' %}‚è≥ –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
                        {% else %}‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ{% endif %}
                    </span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p style="color: #666;">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</p>
        {% endif %}
        <!-- –£–í–ï–õ–ò–ß–ï–ù–ù–´–ô –û–¢–°–¢–£–ü -->
        <div style="margin-top: 25px;">
            <a href="{% url 'create_event' %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-block; width: 100%; text-align: center;">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ
            </a>
        </div>
    </div>
    
    <!-- –ú–æ–∏ —Ñ–æ—Ç–æ -->
    <div class="card" style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
        <h3 style="color: #cb5603; margin-bottom: 20px;">–ú–æ–∏ —Ñ–æ—Ç–æ ({{ user_photos.count }})</h3>
        {% if user_photos %}
            <ul style="list-style: none; padding: 0;">
            {% for photo in user_photos %}
                <li style="padding: 10px; border-bottom: 1px solid #eee;">
                    –§–æ—Ç–æ #{{ photo.id }}
                    <br>
                    <small>–°–æ–±—ã—Ç–∏–µ: {{ photo.event_album.title }}</small>
                    <span style="float: right; 
                                color: {% if photo.status == 'approved' %}#28a745{% elif photo.status == 'pending' %}#856404{% else %}#721c24{% endif %};
                                background: {% if photo.status == 'approved' %}#d4edda{% elif photo.status == 'pending' %}#fff3cd{% else %}#f8d7da{% endif %};
                                padding: 2px 8px; border-radius: 12px; font-size: 12px;">
                        {% if photo.status == 'approved' %}‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ
                        {% elif photo.status == 'pending' %}‚è≥ –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
                        {% else %}‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ{% endif %}
                    </span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p style="color: #666;">–í—ã –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏ —Ñ–æ—Ç–æ</p>
        {% endif %}
        <!-- –£–í–ï–õ–ò–ß–ï–ù–ù–´–ô –û–¢–°–¢–£–ü -->
        <div style="margin-top: 25px;">
            <a href="{% url 'upload_photo' %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-block; width: 100%; text-align: center;">
                ‚ûï –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
            </a>
        </div>
    </div>
</div>

<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ -->
<div style="background: #e7f3ff; padding: 20px; border-radius: 8px; margin-top: 40px; border-left: 4px solid #007bff;">
    <h4 style="color: #007bff; margin-bottom: 10px;">üí° –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h4>
    <p style="margin: 0; color: #0056b3;">
        ‚Ä¢ <strong>–û–¥–æ–±—Ä–µ–Ω–æ</strong> - –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∏–¥–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º<br>
        ‚Ä¢ <strong>–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</strong> - –æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º<br>
        ‚Ä¢ <strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</strong> - –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à–µ–ª –º–æ–¥–µ—Ä–∞—Ü–∏—é
    </p>
</div>
{% endblock %}