{% extends 'base.html' %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - –§–æ—Ç–æ–∞—Ä—Ö–∏–≤ —à–∫–æ–ª—ã ‚Ññ2086{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">
    <h1 class="page-title" style="margin-bottom: 30px;">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>

    <!-- –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    {% if user.is_staff or user.is_superuser %}
    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 25px;">
        <h3 style="margin-bottom: 15px; color: #333;">
            {% if user.is_superuser %}
            –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
            {% else %}
            –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
            {% endif %}
        </h3>

        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <a href="{% url 'moderation_dashboard' %}" class="btn" style="background: #28a745; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: 500; border: none;">
                –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
            </a>

            {% if user.is_superuser %}
            <a href="/admin/" class="btn" style="background: #cb5603; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: 500; border: none;">
                –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Django
            </a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ–¥–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-bottom: 40px;">

        <!-- –£—á–µ–±–Ω—ã–µ –≥–æ–¥—ã -->
        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
            <h2 style="color: #cb5603; margin-bottom: 20px;">üìÖ –ú–æ–∏ —É—á–µ–±–Ω—ã–µ –≥–æ–¥—ã ({{ user_years.count }})</h2>

            {% if user_years %}
                {% for year in user_years %}
                <div style="padding: 15px; background: #f8f9fa; border-radius: 5px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>{{ year.year }}</strong>
                            <span style="color: {% if year.status == 'approved' %}#28a745{% elif year.status == 'rejected' %}#dc3545{% else %}#ffc107{% endif %}; font-size: 12px; margin-left: 10px;">
                                {{ year.get_status_display }}
                            </span>
                        </div>
                        <small style="color: #666;">{{ year.created_at|date:"d.m.Y" }}</small>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #666; margin-bottom: 20px;">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ —É—á–µ–±–Ω—ã–µ –≥–æ–¥—ã</p>
            {% endif %}

            <a href="{% url 'create_year' %}" class="btn" style="background: #cb5603; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; display: inline-block; margin-top: 10px;">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–±–Ω—ã–π –≥–æ–¥
            </a>
        </div>

        <!-- –ö–ª–∞—Å—Å—ã -->
        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
            <h2 style="color: #cb5603; margin-bottom: 20px;">üè´ –ú–æ–∏ –∫–ª–∞—Å—Å—ã ({{ user_classes.count }})</h2>

            {% if user_classes %}
                {% for class in user_classes %}
                <div style="padding: 15px; background: #f8f9fa; border-radius: 5px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>{{ class.class_name }}</strong>
                            <span style="color: #666; font-size: 12px; margin-left: 10px;">
                                ({{ class.year_album.year }})
                            </span>
                            <span style="color: {% if class.status == 'approved' %}#28a745{% elif class.status == 'rejected' %}#dc3545{% else %}#ffc107{% endif %}; font-size: 12px; margin-left: 10px;">
                                {{ class.get_status_display }}
                            </span>
                        </div>
                        <small style="color: #666;">{{ class.created_at|date:"d.m.Y" }}</small>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #666; margin-bottom: 20px;">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –∫–ª–∞—Å—Å—ã</p>
            {% endif %}

            <a href="{% url 'create_class' %}" class="btn" style="background: #cb5603; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; display: inline-block; margin-top: 10px;">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å
            </a>
        </div>

        <!-- –°–æ–±—ã—Ç–∏—è -->
        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
            <h2 style="color: #cb5603; margin-bottom: 20px;">üìù –ú–æ–∏ —Å–æ–±—ã—Ç–∏—è ({{ user_events.count }})</h2>

            {% if user_events %}
                {% for event in user_events %}
                <div style="padding: 15px; background: #f8f9fa; border-radius: 5px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>{{ event.title }}</strong>
                            <span style="color: #666; font-size: 12px; margin-left: 10px;">
                                ({{ event.school_class.class_name }} - {{ event.school_class.year_album.year }})
                            </span>
                            <span style="color: {% if event.status == 'approved' %}#28a745{% elif event.status == 'rejected' %}#dc3545{% else %}#ffc107{% endif %}; font-size: 12px; margin-left: 10px;">
                                {{ event.get_status_display }}
                            </span>
                        </div>
                        <small style="color: #666;">{{ event.created_at|date:"d.m.Y" }}</small>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #666; margin-bottom: 20px;">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</p>
            {% endif %}

            <a href="{% url 'create_event' %}" class="btn" style="background: #cb5603; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; display: inline-block; margin-top: 10px;">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ
            </a>
        </div>

        <!-- –§–æ—Ç–æ -->
        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
            <h2 style="color: #cb5603; margin-bottom: 20px;">üì∑ –ú–æ–∏ —Ñ–æ—Ç–æ ({{ user_photos.count }})</h2>

            {% if user_photos %}
                {% for photo in user_photos %}
                <div style="padding: 15px; background: #f8f9fa; border-radius: 5px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>–§–æ—Ç–æ {{ photo.id }}</strong>
                            <span style="color: #666; font-size: 12px; margin-left: 10px;">
                                ({{ photo.event_album.title }})
                            </span>
                            <span style="color: {% if photo.status == 'approved' %}#28a745{% elif photo.status == 'rejected' %}#dc3545{% else %}#ffc107{% endif %}; font-size: 12px; margin-left: 10px;">
                                {{ photo.get_status_display }}
                            </span>
                        </div>
                        <small style="color: #666;">{{ photo.uploaded_at|date:"d.m.Y" }}</small>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #666; margin-bottom: 20px;">–í—ã –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏ —Ñ–æ—Ç–æ</p>
            {% endif %}

            <a href="{% url 'upload_photo' %}" class="btn" style="background: #cb5603; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; display: inline-block; margin-top: 10px;">
                ‚ûï –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
            </a>
        </div>
    </div>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ -->
    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
        <h3 style="color: #333; margin-bottom: 20px;">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
            <div style="text-align: center;">
                <div style="color: #28a745; font-size: 24px; margin-bottom: 10px;">‚úÖ</div>
                <strong>–û–¥–æ–±—Ä–µ–Ω–æ</strong>
                <p style="color: #666; font-size: 14px; margin: 5px 0 0 0;">–∫–æ–Ω—Ç–µ–Ω—Ç –≤–∏–¥–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</p>
            </div>
            <div style="text-align: center;">
                <div style="color: #ffc107; font-size: 24px; margin-bottom: 10px;">‚è≥</div>
                <strong>–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</strong>
                <p style="color: #666; font-size: 14px; margin: 5px 0 0 0;">–æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</p>
            </div>
            <div style="text-align: center;">
                <div style="color: #dc3545; font-size: 24px; margin-bottom: 10px;">‚ùå</div>
                <strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</strong>
                <p style="color: #666; font-size: 14px; margin: 5px 0 0 0;">–∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à–µ–ª –º–æ–¥–µ—Ä–∞—Ü–∏—é</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
