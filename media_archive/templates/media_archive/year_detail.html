{% extends 'base.html' %}

{% block title %}{{ year.year }} - –§–æ—Ç–æ–∞—Ä—Ö–∏–≤ —à–∫–æ–ª—ã ‚Ññ2086{% endblock %}

{% block content %}
<div style="margin-bottom: 30px;">
    <nav style="margin-bottom: 20px; font-size: 14px; color: #666;">
        <a href="{% url 'home' %}" style="color: #cb5603; text-decoration: none;">–ì–ª–∞–≤–Ω–∞—è</a>
        &nbsp;‚Üí&nbsp;
        <span>{{ year.year }}</span>
    </nav>

    <!-- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥–æ–¥–∞ -->
    <div style="text-align: center; margin-bottom: 40px;">
        <h1 class="page-title" style="margin-bottom: 10px; color: #cb5603;">{{ year.year }} —É—á–µ–±–Ω—ã–π –≥–æ–¥</h1>
        <p style="color: #666; font-size: 18px; margin: 0;">–ö–ª–∞—Å—Å—ã —ç—Ç–æ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞</p>
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è/–∞–¥–º–∏–Ω–∞ -->
{% if user.is_authenticated and user == year.created_by or user.is_staff or user.is_superuser %}
<div style="text-align: center; margin: 15px 0;">
    <a href="{% url 'delete_year' year.id %}" class="btn" style="background: #dc3545; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none; display: inline-flex; align-items: center; gap: 5px;">
        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≥–æ–¥
    </a>
</div>
{% endif %}

<!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞ -->
{% if user.is_authenticated and classes %}
<div style="text-align: center; margin: 25px 0;">
    <a href="{% url 'create_class_for_year' year.id %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
        ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –≤ —ç—Ç–æ–º –≥–æ–¥—É
    </a>
</div>
{% endif %}

{% if classes %}
<div class="classes-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; justify-items: center;">
    {% for class in classes %}
    <div class="class-card" style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); cursor: pointer; transition: all 0.3s ease; width: 100%; max-width: 350px;"
         onclick="location.href='{% url 'class_detail' class.id %}'">
        <h3 style="color: #cb5603; margin-bottom: 15px; text-align: center;">{{ class.class_name }}</h3>

        <div style="margin-bottom: 15px; text-align: center;">
            <span style="color: #666; font-size: 14px;">
                üìÖ {{ class.approved_events_count }} —Å–æ–±—ã—Ç–∏–π
            </span>
        </div>

        <div style="color: #888; font-size: 13px; text-align: center;">
            –°–æ–∑–¥–∞–Ω–æ: {{ class.created_by.username }}<br>
            {{ class.created_at|date:"d.m.Y" }}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; padding: 60px 20px; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
    <div style="font-size: 48px; margin-bottom: 20px;">üè´</div>
    <h3 style="color: #666; margin-bottom: 15px;">–ü–æ–∫–∞ –Ω–µ—Ç –∫–ª–∞—Å—Å–æ–≤</h3>
    <p style="color: #888; margin-bottom: 25px;">–ö–ª–∞—Å—Å—ã –¥–ª—è —ç—Ç–æ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–ª–∏ –Ω–µ –æ–¥–æ–±—Ä–µ–Ω—ã</p>
    {% if user.is_authenticated %}
    <a href="{% url 'create_class_for_year' year.id %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none;">
        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å
    </a>
    {% endif %}
</div>
{% endif %}

<!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –≤–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
<div style="text-align: center; margin-top: 40px;">
    <a href="{% url 'home' %}" class="btn" style="background: #6c757d; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-block;">
        ‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
    </a>
</div>
{% endblock %}