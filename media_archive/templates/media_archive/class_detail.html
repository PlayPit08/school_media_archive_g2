{% extends 'base.html' %}

{% block title %}{{ school_class.class_name }} - {{ school_class.year_album.year }}{% endblock %}

{% block content %}
<div style="margin-bottom: 30px;">
    <nav style="margin-bottom: 20px; font-size: 14px; color: #666;">
        <a href="{% url 'home' %}" style="color: #cb5603; text-decoration: none;">–ì–ª–∞–≤–Ω–∞—è</a>
        &nbsp;‚Üí&nbsp;
        <a href="{% url 'year_detail' school_class.year_album.id %}" style="color: #cb5603; text-decoration: none;">{{ school_class.year_album.year }}</a>
        &nbsp;‚Üí&nbsp;
        <span>{{ school_class.class_name }}</span>
    </nav>

    <!-- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–ª–∞—Å—Å–∞ -->
    <div style="text-align: center; margin-bottom: 40px;">
        <h1 class="page-title" style="margin-bottom: 10px; color: #cb5603;">{{ school_class.class_name }}</h1>
        <p style="color: #666; font-size: 18px; margin: 0;">{{ school_class.year_album.year }} —É—á–µ–±–Ω—ã–π –≥–æ–¥</p>
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è/–∞–¥–º–∏–Ω–∞ -->
{% if user.is_authenticated and user == school_class.created_by or user.is_staff or user.is_superuser %}
<div style="text-align: center; margin: 15px 0;">
    <a href="{% url 'delete_class' school_class.id %}" class="btn" style="background: #dc3545; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none; display: inline-flex; align-items: center; gap: 5px;">
        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å
    </a>
</div>
{% endif %}

<!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è -->
{% if user.is_authenticated and events %}
<div style="text-align: center; margin: 25px 0;">
    <a href="{% url 'create_event_for_class' school_class.id %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
        ‚ûï –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ
    </a>
</div>
{% endif %}

{% if events %}
<div class="events-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; justify-items: center;">
    {% for event in events %}
    <div class="event-card" style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); cursor: pointer; transition: all 0.3s ease; width: 100%; max-width: 350px;"
         onclick="location.href='{% url 'event_detail' event.id %}'">
        <h3 style="color: #cb5603; margin-bottom: 15px; text-align: center;">{{ event.title }}</h3>

        <div style="margin-bottom: 15px; text-align: center;">
            <span style="color: #666; font-size: 14px;">
                üì∏ {{ event.approved_photos_count }} —Ñ–æ—Ç–æ
            </span>
        </div>

        <div style="color: #888; font-size: 13px; text-align: center;">
            –°–æ–∑–¥–∞–Ω–æ: {{ event.created_by.username }}<br>
            {{ event.created_at|date:"d.m.Y" }}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; padding: 60px 20px; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
    <div style="font-size: 48px; margin-bottom: 20px;">üìÅ</div>
    <h3 style="color: #666; margin-bottom: 15px;">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π</h3>
    <p style="color: #888; margin-bottom: 25px;">–°–æ–±—ã—Ç–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
    {% if user.is_authenticated %}
    <a href="{% url 'create_event_for_class' school_class.id %}" class="btn" style="background: #cb5603; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none;">
        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
    </a>
    {% endif %}
</div>
{% endif %}

<!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –≤–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
<div style="text-align: center; margin-top: 40px;">
    <a href="{% url 'year_detail' school_class.year_album.id %}" class="btn" style="background: #6c757d; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-block;">
        ‚Üê –ù–∞–∑–∞–¥ –∫ –≥–æ–¥—É
    </a>
</div>
{% endblock %}